{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/api/documents/upload":{"post":{"tags":["documents"],"summary":"Upload File","description":"Faz upload do arquivo e analisa as alterações necessárias (SEM aplicar).","operationId":"upload_file_api_documents_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_file_api_documents_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/apply":{"post":{"tags":["documents"],"summary":"Apply Formatting","description":"Aplica a formatação ABNT no documento após autorização do usuário.","operationId":"apply_formatting_api_documents_apply_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplyRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/download/{filename}":{"get":{"tags":["documents"],"summary":"Download File","operationId":"download_file_api_documents_download__filename__get","parameters":[{"name":"filename","in":"path","required":true,"schema":{"type":"string","title":"Filename"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/chat":{"post":{"tags":["documents"],"summary":"Chat","operationId":"chat_api_documents_chat_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/structure/{filename}":{"get":{"tags":["documents"],"summary":"Get Structure","description":"Retorna a estrutura do documento com as seções identificadas.","operationId":"get_structure_api_documents_structure__filename__get","parameters":[{"name":"filename","in":"path","required":true,"schema":{"type":"string","title":"Filename"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/write":{"post":{"tags":["documents"],"summary":"Write To Document","description":"Gera texto acadêmico com IA e insere no documento.","operationId":"write_to_document_api_documents_write_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WriteRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/preview/{filename}":{"get":{"tags":["documents"],"summary":"Get Document Preview","description":"Retorna o arquivo DOCX para preview direto no frontend.","operationId":"get_document_preview_api_documents_preview__filename__get","parameters":[{"name":"filename","in":"path","required":true,"schema":{"type":"string","title":"Filename"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/write-stream":{"post":{"tags":["documents"],"summary":"Write Stream","description":"Gera texto acadêmico com IA usando streaming SSE.","operationId":"write_stream_api_documents_write_stream_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/documents/complete-vision/{filename}":{"get":{"tags":["documents"],"summary":"Get Complete Vision","description":"NORMAEX 2.0 - Retorna a visão completa estrutural + visual do documento\n\nEste endpoint extrai:\n- Estrutura completa do DOCX (parágrafos, estilos, hierarquia, margens)\n- Análise visual do PDF (coordenadas, layout, fontes)\n- Estatísticas do documento\n- Verificação rápida de conformidade ABNT","operationId":"get_complete_vision_api_documents_complete_vision__filename__get","parameters":[{"name":"filename","in":"path","required":true,"schema":{"type":"string","title":"Filename"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/analyze-structure/{filename}":{"get":{"tags":["documents"],"summary":"Analyze Structure","description":"NORMAEX 2.0 - Análise estrutural inteligente com IA\n\nEste endpoint:\n- Extrai visão completa do documento (FASE 1)\n- Analisa estrutura com IA Gemini (FASE 2)\n- Classifica parágrafos (title, body, citation, etc.)\n- Detecta inconsistências de estilo\n- Identifica problemas ABNT\n- Gera plano de ação executável\n\nReturns:\n    dict: Análise completa + plano de ação","operationId":"analyze_structure_api_documents_analyze_structure__filename__get","parameters":[{"name":"filename","in":"path","required":true,"schema":{"type":"string","title":"Filename"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/smart-format":{"post":{"tags":["documents"],"summary":"Smart Format","description":"NORMAEX 2.0 - Formatação inteligente com IA + Executor\n\nEste endpoint implementa o fluxo completo:\n1. FASE 1: Extrai visão completa do documento\n2. FASE 2: IA analisa e gera plano de ação\n3. FASE 3: Executor aplica o plano de ação\n\nArgs:\n    request: Contém o filename do documento\n\nReturns:\n    dict: Resultado da formatação inteligente","operationId":"smart_format_api_documents_smart_format_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplyRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/validate/{filename}":{"get":{"tags":["documents"],"summary":"Validate Document","description":"NORMAEX 2.0 - FASE 4: Validação Visual de Formatação\n\nEste endpoint valida se o documento formatado está em conformidade\ncom as normas ABNT usando análise visual do PDF.\n\nArgs:\n    filename: Nome do arquivo a ser validado\n    compare_with: (Opcional) Nome do arquivo original para comparação\n\nReturns:\n    dict: Resultado completo da validação com scores 0-100\n\nValidações realizadas:\n- Margens (3cm top/left, 2cm bottom/right)\n- Fontes (Arial/Times 12pt)\n- Espaçamento (1.5 entre linhas)\n- Alinhamento (justificado)\n- Score geral de conformidade ABNT","operationId":"validate_document_api_documents_validate__filename__get","parameters":[{"name":"filename","in":"path","required":true,"schema":{"type":"string","title":"Filename"}},{"name":"compare_with","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Compare With"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/intelligent-write":{"post":{"tags":["documents"],"summary":"Intelligent Write","description":"NORMAEX 2.0 - FASE 5: Escrita Inteligente\n\nIA escreve texto JÁ formatado estruturalmente seguindo ABNT.\n\nDiferença do /write normal:\n- /write: IA escreve texto → depois formata (2 etapas)\n- /intelligent-write: IA escreve + formata simultaneamente (1 etapa integrada)\n\nArgs:\n    request: WriteRequest com filename, instruction, section_type, position\n\nReturns:\n    dict: Texto gerado + estrutura aplicada + documento editado","operationId":"intelligent_write_api_documents_intelligent_write_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WriteRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/intelligent-write-stream":{"post":{"tags":["documents"],"summary":"Intelligent Write Stream","description":"NORMAEX 2.0 - FASE 5: Escrita Inteligente com Streaming\n\nVersão streaming da escrita inteligente usando SSE.\nRetorna texto conforme é gerado pela IA.\n\nReturns:\n    EventSourceResponse: Stream de eventos com chunks de texto","operationId":"intelligent_write_stream_api_documents_intelligent_write_stream_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Read Root","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"ApplyRequest":{"properties":{"filename":{"type":"string","title":"Filename"}},"type":"object","required":["filename"],"title":"ApplyRequest"},"Body_upload_file_api_documents_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_file_api_documents_upload_post"},"ChatRequest":{"properties":{"filename":{"type":"string","title":"Filename"},"message":{"type":"string","title":"Message"}},"type":"object","required":["filename","message"],"title":"ChatRequest"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WriteRequest":{"properties":{"filename":{"type":"string","title":"Filename"},"instruction":{"type":"string","title":"Instruction"},"section_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Section Type","default":"geral"},"position":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Position","default":"fim"}},"type":"object","required":["filename","instruction"],"title":"WriteRequest"}}}}